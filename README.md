# FastAPI Task Limiter

**FastAPI Task Limiter** – это сервис, который управляет выполнением задач с использованием блокировки. Это гарантирует, что только один запрос будет выполняться одновременно, а другие запросы будут ждать завершения текущего.

## Как запустить проект

### 1. Клонирование репозитория

Клонируйте репозиторий и перейдите в директорию проекта:

```bash
git clone git@github.com:poligrafo/fastapi-task-limiter.git
cd fastapi-task-limiter
```
### 2. Запуск проекта с Docker

Для запуска проекта используйте Docker и Docker Compose:

```bash
docker-compose up --build
```
### 3. Проверка работы проекта

Чтобы убедиться, что сервис работает правильно, выполните три параллельных запроса к маршруту /test:

```bash
curl -X GET http://localhost:8000/test & curl -X GET http://localhost:8000/test & curl -X GET http://localhost:8000/test
``` 
Ожидаемый результат
- Первый запрос завершится примерно через 3 секунды.
- Второй запрос завершится через ~6 секунд.
- Третий запрос завершится через ~9 секунд.
- 
Пример ответа каждого запроса:
```bash
{
  "elapsed": 3.0009
}
``` 
Это означает, что запросы выполняются последовательно, как и предусмотрено.
### 4. Просмотр логов
Логи выполнения запросов можно просмотреть в консоли или в файле /app/logs/app.log внутри контейнера.

Пример лога:
```bash
2024-09-11 21:52:02,502 - app - INFO - Work completed. Elapsed time: 3.0004 seconds
``` 